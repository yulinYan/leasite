webpackJsonp([10],{cXCu:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"RoleListEdit",props:{roleObj:{type:Object,required:!0}},data:function(){return{menuList:[],ApplicationEntry:[],centerDialogVisible:!0,menuIds:[],appParentId:""}},beforeMount:function(){this.getAuthData()},methods:{model_2_selectAll:function(e,t){t.checked&&(e.checked||(e.checked=!0))},model_3_select:function(e,t,i){i.checked&&(t.checked||(t.checked=!0),e.checked||(e.checked=!0))},oneAllCheck:function(e){e.children&&e.children.forEach(function(t){t.checked=!e.checked,t.children&&t.children.forEach(function(e){e.checked=t.checked})})},TwoAllCheck:function(e,t){t.children&&t.children.forEach(function(e){e.checked=!t.checked})},getAuthData:function(){var e=this;this.$axios.leansite({method:"get",url:this.API.leansite.getMenuByRoleId,params:{roleId:1*this.roleObj.roleId}}).then(function(t){var i=t.data;200==i.status?e.menuList=i.data.rows.children:e.$message({type:"error",message:"获取权限信息失败，请退出重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},save:function(){var e=this;this.menuIds=[],this.ApplicationEntry=[],this.appParentId="",this.foreachMenu(this.menuList),this.$axios.leansite({method:"POST",url:this.API.leansite.saveMenuState,params:{roleId:1*this.roleObj.roleId,menuIds:this.menuIds.toString(),appIds:this.ApplicationEntry.toString()}}).then(function(t){200==t.data.status?e.$message({type:"success",message:"分配权限成功！"}):e.$message({type:"error",message:"分配权限失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})}),this.$emit("RoleAuthCallBack",!1)},foreachMenu:function(e){var t=this;e.forEach(function(e,i){"获取应用入口列表"==e.title?(e.checked&&t.menuIds.push(e.id),t.appParentId=e.id):t.appParentId==e.parentId&&e.checked?t.ApplicationEntry.push(e.id):"获取应用入口列表"!=e.title&&e.checked&&t.menuIds.push(e.id),e.children&&e.children.length>0&&t.foreachMenu(e.children)})},cancelOpt:function(){this.$emit("RoleAuthCallBack",!1)}}},l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("div",{staticClass:"RoleListEdit"},[e._m(0),e._v(" "),e._l(e.menuList,function(t,a){return i("div",{key:a,staticClass:"models"},[i("div",{staticClass:"model_1",staticStyle:{width:"154px"},on:{click:function(i){return e.oneAllCheck(t)}}},[i("el-checkbox",{staticClass:"model1_checkbox",model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"item.checked"}},[e._v(e._s(t.title))])],1),e._v(" "),t.children&&t.children.length>0?i("div",e._l(t.children,function(a,l){return i("div",{key:l,staticClass:"model_2"},[i("div",{staticClass:"model_2_2",staticStyle:{width:"175px"},on:{click:function(i){return e.TwoAllCheck(t,a)}}},[i("el-checkbox",{staticClass:"model2_checkbox",on:{change:function(i){return e.model_2_selectAll(t,a)}},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"item2.checked"}},[e._v(e._s(a.title))])],1),e._v(" "),a.children&&a.children.length>0?i("div",{staticClass:"model_2_3",staticStyle:{width:"calc(100% - 154px)"}},e._l(a.children,function(l,o){return i("el-checkbox",{key:o,staticClass:"model3_checkbox",on:{change:function(i){return e.model_3_select(t,a,l)}},model:{value:l.checked,callback:function(t){e.$set(l,"checked",t)},expression:"item3.checked"}},[e._v(e._s(l.title))])}),1):e._e()])}),0):e._e()])})],2),e._v(" "),i("div",{staticClass:"btn"},[i("el-button",{staticClass:"cancelBtn",on:{click:e.cancelOpt}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)])};l._withStripped=!0;var o={render:l,staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"model"},[t("div",{staticStyle:{width:"157px"}},[this._v("模块1")]),this._v(" "),t("div",{staticStyle:{width:"174px"}},[this._v("模块2")]),this._v(" "),t("div",{staticStyle:{width:"calc(100% - 310px)"}},[this._v("模块3")])])}]},n=o;var c=!1;var d=i("C7Lr")(a,n,!1,function(e){c||i("q9/P")},"data-v-3c4a46fa",null);d.options.__file="src/views/userCenter/RoleListEdit.vue";t.default=d.exports},"q9/P":function(e,t,i){var a=i("sWWC");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("FIqI")("0e1800d5",a,!1,{})},sWWC:function(e,t,i){(e.exports=i("UTlt")(!1)).push([e.i,"\n.box[data-v-3c4a46fa]{background-color:#ffffff;border-radius:8px !important;margin-top:-30px;padding:0;overflow:hidden\n}\n.box .RoleListEdit[data-v-3c4a46fa]{background-color:#ffffff;margin:16px auto;border:solid 1px #d2d5dc;border-radius:8px !important;overflow:hidden\n}\n.box .RoleListEdit[data-v-3c4a46fa] :last-child{border-bottom:none !important\n}\n.box .RoleListEdit .model[data-v-3c4a46fa]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.box .RoleListEdit .model[data-v-3c4a46fa] :last-child{border-bottom:1px solid #d2d5dc !important;border-right:none\n}\n.box .RoleListEdit .model div[data-v-3c4a46fa]{text-align:center;border-right:1px solid #d2d5dc;border-bottom:1px solid #d2d5dc;height:40px;line-height:40px;font-size:16px;color:#101010\n}\n.box .RoleListEdit .models[data-v-3c4a46fa]{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #d2d5dc\n}\n.box .RoleListEdit .models div[data-v-3c4a46fa]{text-align:center;width:calc(100% - 154px)\n}\n.box .RoleListEdit .models .model_1[data-v-3c4a46fa]{border-right:none !important\n}\n.box .RoleListEdit .models .model_1 .el-checkbox[data-v-3c4a46fa]{padding:10px\n}\n.box .RoleListEdit .models .model_2[data-v-3c4a46fa]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #d2d5dc;border-left:1px solid #d2d5dc;width:100%\n}\n.box .RoleListEdit .models .model_2 .el-checkbox[data-v-3c4a46fa]{margin:10px 30px 10px\n}\n.box .RoleListEdit .models .model_2_2[data-v-3c4a46fa]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:left;-ms-flex-pack:left;justify-content:left\n}\n.box .RoleListEdit .models .model_2_3[data-v-3c4a46fa]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:left;-ms-flex-pack:left;justify-content:left;text-align:center;border-left:1px solid #d2d5dc\n}\n.box .RoleListEdit .models .model_2_3 .el-checkbox[data-v-3c4a46fa]{margin:10px 30px 0;padding:0 0 10px\n}\n.box .RoleListEdit .models .model_2_3 .el-checkbox .el-checkbox__label[data-v-3c4a46fa]{margin-top:10px;margin:0;padding:0;float:right\n}\n.box .RoleListEdit .models .model_2_3 .el-checkbox .el-checkbox__inner[data-v-3c4a46fa]{float:left;margin:0;padding:0\n}\n.box .RoleListEdit .models .model_2_3 .el-checkbox__label[data-v-3c4a46fa]{margin-top:10px;text-align:left\n}\n.box .RoleListEdit .models .el-checkbox__inner[data-v-3c4a46fa]{float:left\n}\n.box .RoleListEdit .models[data-v-3c4a46fa] .el-checkbox__label{max-width:85px;white-space:nowrap;float:right;font-size:14px;color:#303030;margin-top:-1px;text-overflow:ellipsis;overflow:hidden\n}\n.box .btn[data-v-3c4a46fa]{width:200px;margin:0 auto;text-align:center\n}\n.box .btn .cancelBtn[data-v-3c4a46fa]{background-color:#c4d4e7 !important\n}\n",""])}});