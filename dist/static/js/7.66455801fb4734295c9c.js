webpackJsonp([7],{"+TjY":function(e,t,a){var n=a("faAs");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("FIqI")("2895d0d5",n,!1,{})},FasK:function(e,t,a){(e.exports=a("UTlt")(!1)).push([e.i,"\n.DeptListAddAndEdit[data-v-a4370130]{height:100%;border-radius:16px;overflow:hidden\n}\n.DeptListAddAndEdit .el-header[data-v-a4370130]{height:60px;line-height:60px;background-color:#ffffff;border-bottom:1px solid #d9e3f3;padding:0 40px\n}\n.DeptListAddAndEdit .el-header .leftHeader span[data-v-a4370130]{font-size:16px;color:#424956\n}\n.DeptListAddAndEdit .el-header .el-col.rightHeader[data-v-a4370130]{text-align:right !important\n}\n.DeptListAddAndEdit .el-header .el-col.rightHeader .addUser[data-v-a4370130]{margin-right:23px;font-size:16px;color:#2c5ac2\n}\n.DeptListAddAndEdit .el-header .el-col.rightHeader .batchDel[data-v-a4370130]{font-size:16px;color:#ed5151\n}\n.DeptListAddAndEdit .el-header .el-col.rightHeader .el-input[data-v-a4370130]{margin-left:23px;width:200px;outline:none;color:#6ecd8b\n}\n.DeptListAddAndEdit .el-header .el-col.rightHeader .el-input .el-icon-search[data-v-a4370130]{color:#6ecd8b;outline:none\n}\n.DeptListAddAndEdit .el-header .el-col.rightHeader .search[data-v-a4370130]{position:relative;left:-30px;top:-2px\n}\n.DeptListAddAndEdit .container[data-v-a4370130]{background-color:#FFFFFF;height:100%;padding:0px 40px 0\n}\n.DeptListAddAndEdit .container .el-table[data-v-a4370130]{color:#303030;font-size:14px\n}\n.DeptListAddAndEdit .container .el-table .warning-row[data-v-a4370130]{background:#f2f4f6\n}\n.DeptListAddAndEdit .container .el-table .edit[data-v-a4370130]{border:solid 1px #68c161;color:#6ecd8b;font-size:14px;padding:9px 7px;width:80px;height:30px;padding-top:8px\n}\n.DeptListAddAndEdit .container .el-table .edit .edit-img[data-v-a4370130]{margin-right:6px\n}\n.DeptListAddAndEdit .container .el-table .delete[data-v-a4370130]{border-radius:4px;border:solid 1px #ec5555;color:#ed5151;font-size:14px;padding:9px 7px;width:80px;height:30px;padding-top:8px\n}\n.DeptListAddAndEdit .el-main[data-v-a4370130]{padding:30px\n}\n.DeptListAddAndEdit .dialog-footer[data-v-a4370130]{margin-top:15px;text-align:center\n}\n.DeptListAddAndEdit .dialog-footer .el-button[data-v-a4370130]{width:130px\n}\n.DeptListAddAndEdit .dialog-footer .el-button[data-v-a4370130]:first-child{margin-right:70px;color:#FFFFFF;background-color:#c4d4e7\n}\n[data-v-a4370130] .el-dialog{background-color:#ffffff;-webkit-box-shadow:0px 1px 20px 0px rgba(0,0,0,0.2);box-shadow:0px 1px 20px 0px rgba(0,0,0,0.2);border-radius:16px\n}\n[data-v-a4370130] .el-dialog .el-dialog__header{padding:12px 40px;border-bottom:1px solid #d9e3f3\n}\n",""])},NVMT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("cMGX"),i={name:"DeptListAddAndEdit",props:{userObj:{type:Object,required:!0},deptId:{type:String,required:!0}},components:{Pagination:n.a},data:function(){return{self:this,pageType:"add",tableData:[],multipleSelection:[],pageObj:{pageIndex:this.API.leansite.constObj.pageIndex,total:0,pageSize:this.API.leansite.constObj.pageSize},userDialogVisible:!1,searchText:"",dialogTitle:"添加用户"}},created:function(){this.getData()},methods:{addUser:function(e){var t="";this.multipleSelection.forEach(function(e,a){t+=e.userId+","});var a=this;a.$axios.leansite({method:"post",url:a.API.leansite.addDeptUsers,data:{userId:t.slice(0,t.length-1),deptId:this.deptId}}).then(function(e){"200"==e.data.status?(a.$message({type:"success",message:"添加用户成功!"}),a.$emit("UserCallBack",!0)):a.$message({type:"error",message:"添加用户失败，请退出重试！"})}).catch(function(e){a.$message({type:"error",message:"请求异常，请检查网络！"})})},editUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$axios.leansite({method:"post",url:t.API.leansite.updateUser,data:t.userForm}).then(function(e){"200"==e.data.status?(t.$message({type:"success",message:"修改用户信息成功!"}),t.resetForm(),t.$emit("UserCallBack",!0)):t.$message({type:"error",message:"修改用户信息失败，请退出重试！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})})},cancelOpt:function(){this.$emit("UserCallBack",!1)},PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getData()},getData:function(){var e=this;this.$axios.leansite({method:"get",url:this.API.leansite.notGroupUser,params:{param:this.searchText.trim(),pageNum:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;200==a.status?(e.tableData=a.data.records,e.pageObj.total=a.data.total):e.$message({type:"error",message:"查询失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},handleSelectionChange:function(e){this.multipleSelection=e},cellStyle:function(e){e.row,e.column;var t=e.rowIndex,a=(e.columnIndex,{"text-align":"center","font-size":"14px","background-color":"#ffffff",color:"#303030"});return t%2!=0&&(a["background-color"]="#f2f4f6"),a}}},s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"DeptListAddAndEdit"},[a("div",{staticClass:"container"},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{stripe:"",data:e.tableData,"cell-style":e.cellStyle,"header-cell-style":{background:"#f2f4f6",color:"#101010"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"员工姓名",align:"center",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户",align:"center",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"电话",align:"center",width:"120"}})],1),e._v(" "),a("Pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel",on:{click:e.cancelOpt}},[e._v("取 消")]),e._v(" "),"add"==e.pageType?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addUser("userForm")}}},[e._v("保存")]):"edit"==e.pageType?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editUser("userForm")}}},[e._v("保存")]):e._e()],1)])};s._withStripped=!0;var o={render:s,staticRenderFns:[]},d=o;var r=!1;var l=a("C7Lr")(i,d,!1,function(e){r||a("cSwV")},"data-v-a4370130",null);l.options.__file="src/views/userCenter/DeptListAddAndEdit.vue";var c=l.exports,p={name:"DeptList",components:{Pagination:n.a,DeptListAddAndEdit:c},data:function(){return{aDeptDatas:{},defaultProps:{children:"children",label:"text",id:"id"},tableData:[],multipleSelection:[],pageObj:{pageIndex:this.API.leansite.constObj.pageIndex,total:0,pageSize:this.API.leansite.constObj.pageSize},userDialogVisible:!1,deptId:"",searchText:"",userObj:{},dialogTitle:"添加用户",showDeptName:"显示选中的部门名称"}},created:function(){this.getDeptData()},methods:{PageTurning:function(e){this.pageObj.pageIndex=e.page_index,this.pageObj.pageSize=e.page_size,this.getData()},UserCallBack:function(e){this.userDialogVisible=!1,e&&(this.pageObj.pageIndex=this.API.leansite.constObj.pageIndex,this.getData())},treeClick:function(e,t,a){this.deptId=e.id,this.showDeptName=e.text,this.pageObj.pageIndex=this.API.leansite.constObj.pageIndex,this.getData()},addDept:function(){var e=this;this.$prompt("请输入部门名称","新增部门",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[\S\n\s]{1,10}$/,inputErrorMessage:"请输入十位以内字符"}).then(function(t){var a=t.value;e.addDeptRequest({parentId:e.aDeptDatas.id,name:a.trim()})}).catch(function(){})},addDeptRequest:function(e){var t=this;this.$axios.leansite({method:"post",url:this.API.leansite.addDept,data:{parentId:e.parentId,deptName:e.name}}).then(function(e){200==e.data.status?t.getDeptData():t.$message({type:"error",message:"添加部门失败，请重新添加！"})}).catch(function(e){"部门名称重复录入"==e.response.data.data&&t.$message({type:"error",message:"部门名称重复!"}),t.$message({type:"error",message:"请求异常，请检查网络！"})})},getFirstDept:function(e){for(var t=0;t<e.length;t++)return e[t].hasChildren?void this.getFirstDept(e[t].children):(this.deptId=e[t].id,this.showDeptName=e[t].text,void this.getData())},getDeptData:function(){var e=this;this.$axios.leansite({method:"get",url:this.API.leansite.getDepts}).then(function(t){var a=t.data;200==a.status?(e.aDeptDatas=a.data.rows,e.aDeptDatas.hasChildren?e.getFirstDept(e.aDeptDatas.children):(e.deptId=e.aDeptDatas.id,e.showDeptName=e.aDeptDatas.text,e.getData())):e.$message({type:"error",message:"获取部门失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},getData:function(){var e=this;this.$axios.leansite({method:"get",url:this.API.leansite.getUserByDeptId,params:{id:this.deptId,username:this.searchText,pageNum:this.pageObj.pageIndex,pageSize:this.pageObj.pageSize}}).then(function(t){var a=t.data;200==a.status?(e.tableData=a.data.records,e.pageObj.total=a.data.total):e.$message({type:"error",message:"查询失败，请刷新重试！"})}).catch(function(t){e.$message({type:"error",message:"请求异常，请检查网络！"})})},searchEnterFun:function(e){13==(window.event?e.keyCode:e.which)&&(this.pageObj.pageIndex=this.API.leansite.constObj.pageIndex,this.getData())},datchDel:function(){var e=this;this.multipleSelection.length<=0?this.$message({type:"warning",message:"请先选择需要删除的用户！"}):this.$confirm("确定删除选中的用户","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.multipleSelection.forEach(function(e,a){t.push(e.userId)}),e.deleteRequest(t.toString())}).catch(function(){})},handleAddUser:function(){this.dialogTitle="添加用户",this.userObj={},this.userDialogVisible=!0},handleEdit:function(e,t){this.dialogTitle="编辑用户",this.userObj=this.tableData[e],this.userDialogVisible=!0},handleDelete:function(e,t){var a=this;this.idx=e,this.$confirm("确定删除该用户","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.deleteRequest(t.userId)}).catch(function(){})},deleteRequest:function(e){var t=this;this.$axios.leansite({method:"post",url:this.API.leansite.delDeptUser+"?deptId="+this.deptId+"&userId="+e}).then(function(e){200==e.data.status?(t.multipleSelection=[],t.$message({type:"success",message:"删除成功！"}),t.pageObj.pageIndex=t.API.leansite.constObj.pageIndex,t.getData()):t.$message({type:"error",message:"删除失败！"})}).catch(function(e){t.$message({type:"error",message:"请求异常，请检查网络！"})})},handleSelectionChange:function(e){this.multipleSelection=e},append:function(e){var t=this;this.$prompt("请输入部门名称","新增部门",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[\S\n\s]{1,10}$/,inputErrorMessage:"请输入十位以内字符"}).then(function(a){var n=a.value;t.addDeptRequest({parentId:e.id,name:n.trim()})}).catch(function(){})},remove:function(e,t){var a=this;this.$confirm("确定删除选中的部门","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.leansite({method:"delete",url:a.API.leansite.addDept+"/"+t.id}).then(function(e){200==e.data.status?a.getDeptData():a.$message({type:"error",message:"删除失败！"})}).catch(function(e){a.$message({type:"error",message:"请求异常，请检查网络！"})})}).catch(function(){})}}},h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"deptList"},[a("el-aside",{staticClass:"outAside",attrs:{width:"auto"}},[e.hasPermission("dept:add")?a("el-button",{staticStyle:{"padding-left":"10px"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.addDept}},[e._v("新增集团")]):e._e(),e._v(" "),a("el-tree",{attrs:{data:e.aDeptDatas.children,"node-key":"id",props:e.defaultProps,"default-expand-all":"","highlight-current":"","current-node-key":"0",indent:10,"expand-on-click-node":!1},on:{"node-click":e.treeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,i=t.data;return a("span",{staticClass:"custom-tree-node",staticStyle:{"padding-right":"10px"}},[a("i",{class:1==n.level?"iconfont leansite-ziyuan":"iconfont leansite-bumen",staticStyle:{color:"#aee4fa"}}),e._v(" "),a("span",{staticStyle:{display:"inline-block","margin-left":"5px",width:"104px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[e._v(e._s(n.label))]),e._v(" "),a("span",[e.hasPermission("dept:add")?a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-plus"},on:{click:function(){return e.append(i)}}}):e._e(),e._v(" "),e.hasPermission("dept:delete")?a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(){return e.remove(n,i)}}}):e._e()],1)])}}])})],1),e._v(" "),a("el-container",[a("el-header",[a("el-row",[a("div",{staticClass:"leftHeader",attrs:{title:e.showDeptName}},[e._v("\n\t\t\t\t  \t"+e._s(e.showDeptName)+"\n\t\t\t\t  ")]),e._v(" "),a("div",{staticClass:"rightHeader"},[e.hasPermission("dept:addUser")?a("el-button",{staticClass:"addUser",attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.handleAddUser}},[e._v("新增人员")]):e._e(),e.hasPermission("dept:deleteUser")?a("el-button",{staticClass:"batchDel",attrs:{type:"text",icon:"el-icon-delete"},on:{click:e.datchDel}},[e._v("批量删除")]):e._e(),e.hasPermission("dept:deleteUser")?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入用户名搜索","suffix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEnterFun(t)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}):e._e()],1)])],1),e._v(" "),a("div",{staticClass:"container"},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{stripe:"",data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"员工姓名",align:"center",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户",align:"center",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",align:"center",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"电话",align:"center",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("dept:deleteUser")?a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("Pagination",{attrs:{pageIndex:e.pageObj.pageIndex,total:e.pageObj.total,pageSize:e.pageObj.pageSize},on:{PageTurning:e.PageTurning}})],1)],1),e._v(" "),e.userDialogVisible?a("el-dialog",{key:"userDialog",staticClass:"outDialog",attrs:{title:e.dialogTitle,visible:e.userDialogVisible,width:"580px",height:"430px","append-to-body":"","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.userDialogVisible=t}}},[a("DeptListAddAndEdit",{attrs:{userObj:e.userObj,deptId:e.deptId},on:{UserCallBack:e.UserCallBack}})],1):e._e()],1)};h._withStripped=!0;var g={render:h,staticRenderFns:[]},u=g;var f=!1;var b=a("C7Lr")(p,u,!1,function(e){f||a("+TjY")},"data-v-57c832b0",null);b.options.__file="src/views/userCenter/DeptList.vue";t.default=b.exports},cSwV:function(e,t,a){var n=a("FasK");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("FIqI")("53d102c4",n,!1,{})},faAs:function(e,t,a){(e.exports=a("UTlt")(!1)).push([e.i,"\n.deptList[data-v-57c832b0]{height:100%;background-color:#eef1f7\n}\n.deptList[data-v-57c832b0] .el-tree-node>.el-tree-node__children{overflow:visible\n}\n.deptList .outAside[data-v-57c832b0]{height:100%;overflow:auto;background-color:#eef1f7\n}\n.deptList .outAside .el-tree[data-v-57c832b0]{height:100%;background-color:#eef1f7\n}\n.deptList[data-v-57c832b0] .el-tree-node__content{height:33px !important;font-size:14px\n}\n.deptList[data-v-57c832b0] .el-tree--highlight-current .el-tree-node.is-current>.el-tree-node__content{background-color:#FFFFFF;color:#3f78f6\n}\n.deptList[data-v-57c832b0] .custom-tree-node{line-height:12px\n}\n.deptList[data-v-57c832b0] .custom-tree-node span{overflow:visible !important\n}\n.deptList .el-header[data-v-57c832b0]{height:60px;line-height:60px;background-color:#ffffff;border-bottom:1px solid #d9e3f3;padding:0 40px\n}\n.deptList .el-header .leftHeader[data-v-57c832b0]{font-size:16px;color:#424956;width:calc(100% - 397px);float:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer\n}\n.deptList .el-header .rightHeader[data-v-57c832b0]{float:right;width:397px;text-align:right !important\n}\n.deptList .el-header .rightHeader .addUser[data-v-57c832b0]{font-size:16px;color:#2c5ac2;float:left;height:60px\n}\n.deptList .el-header .rightHeader .batchDel[data-v-57c832b0]{font-size:16px;color:#ed5151;float:left;height:60px\n}\n.deptList .el-header .rightHeader .el-input[data-v-57c832b0]{margin-left:13px;float:left;width:calc(100% - 197px)\n}\n.deptList .el-header .rightHeader .el-input .el-icon-search[data-v-57c832b0]{color:#68c161\n}\n.deptList .container[data-v-57c832b0]{background-color:#FFFFFF;height:100%;padding:27px 40px 0\n}\n.deptList .el-main[data-v-57c832b0]{padding:30px\n}\n.deptList .el-dialog[data-v-57c832b0]{background-color:#ffffff;-webkit-box-shadow:0px 1px 20px 0px rgba(0,0,0,0.2);box-shadow:0px 1px 20px 0px rgba(0,0,0,0.2);border-radius:16px\n}\n.deptList .el-dialog[data-v-57c832b0] .el-dialog__header{padding:12px 40px;border-bottom:1px solid #d9e3f3\n}\n",""])}});